<app-card-percent
    [title]="this.primerNombre+', aquí puede gestionar sus auditorias'"
    [page]="'audit-management'"
></app-card-percent>

<form [formGroup]="this.medicion" *ngIf="this.medicion">

<table class="table table-card" style="margin-top: 20px;">
    <tbody>
      <tr class="title">
        <td scope="col"  class="text-title" colspan="100%" style="font-weight: 100;"><a routerLink="/gestion-de-auditoria" style="color: white; text-decoration: none;"> < Gestor de mediciones < </a><strong style="font-weight: 500;">{{this.nombre}}</strong></td>
      </tr>
      <tr  *ngIf="this.accion==1? this.permisos.Nueva_medicion.visible: this.permisos.Editar_Medicion.visible"
      [ngClass]="{'elementdisabled': this.accion==2? !this.permisos.Nueva_medicion.habilitado: !this.permisos.Editar_Medicion.habilitado}">
          <td style="padding-top: 20px;padding-bottom: 20px;">
            <div class="row">
           
              <div class="col-md-4">
                <mat-form-field appearance="fill">
                  <mat-label class="input-bold">Enfermedad madre</mat-label>
                  <mat-select [disabled]="this.disabledEnfMadre" formControlName="idCobertura">
                    <mat-option (onSelectionChange)="this.GetUsuariosConcatByRoleCoberturaId(element)" *ngFor="let element of type_enfermedad" [value]="element.idCobertura">
                      {{element.nombre}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>


              <div class="col-md-4">
                <mat-form-field appearance="fill">
                  <mat-label class="input-bold">Líder</mat-label>
                  <input id="lider" [value]="this.variable2" matInput>
                </mat-form-field>
              </div>


              <div class="col-md-4">
                <mat-form-field appearance="fill" >
                  <mat-label class="input-bold">Resolución</mat-label>
                  <input (keyup)='this.validarBoton()' formControlName="Resolucion" matInput>
                </mat-form-field>
              </div>
            </div>  
          
            <div class="row">
           
              <div class="col-md-12">
                <mat-form-field appearance="fill">
                  <mat-label class="input-bold">Nombre</mat-label>
                  <input (keyup)='this.validarBoton()' formControlName='nombre' matInput>
                </mat-form-field> 
              </div>
            </div> 

            <div class="row">
              <div class="col-md-12">
                <mat-form-field appearance="fill" >
                  <mat-label class="input-bold">Descripción</mat-label>
                  <input (keyup)='this.validarBoton()' maxlength="200" formControlName='descripcion' matInput>
                </mat-form-field>
              </div> 
            </div> 
            
            <div class="row">
              <div class="col-md-4"> 
                <mat-form-field  appearance="fill">
                <mat-label class="input-bold">Fecha inicio auditoria</mat-label >
                <input formControlName='fechaInicioAuditoria' (blur)="validarFecha('fechaInicioAuditoria');this.validateFechaInicial();this.validarBoton()" matInput 
                type="text"  [patterns]="customPatterns" mask="ABEE-CE-DE" [dropSpecialCharacters]="false" placeholder="AAAA-MM-DD">
               </mat-form-field>                  
            </div> 
            <div class="col-md-4">
              <mat-form-field  appearance="fill">
                <mat-label class="input-bold">Fecha fin auditoria</mat-label>
                <input formControlName='fechaFinAuditoria' (blur)="validarFecha('fechaFinAuditoria');this.validateFechaFinal();this.validarBoton()" matInput 
                type="text"  [patterns]="customPatterns" mask="ABEE-CE-DE" [dropSpecialCharacters]="false" placeholder="AAAA-MM-DD">
               </mat-form-field>
            </div> 

          <div class="col-md-4">
            <mat-form-field  appearance="fill"  [ngClass]="{'elementdisabled':this.objMedicion.fechaCorteAuditoria != null && this.objMedicion.fechaCorteAuditoria != ''}">
              <mat-label class="input-bold">Fecha corte auditoria</mat-label>
              <input formControlName='fechaCorteAuditoria' (blur)="validarFecha('fechaCorteAuditoria');this.validarBoton()" matInput 
              type="text"  [patterns]="customPatterns" mask="ABEE-CE-DE" [dropSpecialCharacters]="false"  placeholder="AAAA-MM-DD"
             >
             </mat-form-field>
          </div> 

          </div>        
                  <button id="buttonGuardar" mat-raised-button class="btn-basic  btn-general bton-crear" [disabled]="this.disabledButton" (click)="this.accionBoton(this.accion)">{{this.textoBotonGuardar}}</button>
          </td>
      </tr>

    </tbody>

</table>


</form>